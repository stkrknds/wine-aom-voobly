# Wine for Age of Mythology & Voobly

This repository provides a version of Wine, capable of running AoM & Voobly without any (known) issues. It contains 2 branches. The upstream branch contains the source code of Wine, with the necessary modifications applied. In the main(current) branch, there is the patch file(generated by getting the difference(git diff) between the upstream branch and the original [Wine](https://github.com/wine-mirror/wine) source code), that can be applied to a Wine source code and a PKGBUILD file, that can be used in Arch/Arch-based distributions to easily build the package.

## Build
### Arch/Arch based distributions
If you use an arch based distribution, you can create a package(build) by utilizing the PKGBUILD that is provided. The PKGBUILD also applies 2 additional patches (esync & fsync), to improve performance.

### Other distributions
To build Wine on your distribution, you should consult the [wiki](https://wiki.winehq.org/Building_Wine). You can use the source code in the upstream branch, or apply the aom.patch on another Wine source code.

## Installation
The builds provided, support esync & fsync.
### Arch/Arch based distributions
Download the latest pacman package in [Releases](https://github.com/stkrknds/wine-aom-voobly/releases/latest)(e.g. wine-aom-voobly-8.5-1-x86_64.pkg.tar.zst), and install it:

```
sudo pacman -U wine-aom-voobly-8.5-1-x86_64.pkg.tar.zst
```

This will install wine in /opt/wine-aom-voobly. Once installed, use it as:

```
/opt/wine-aom-voobly/bin/wine command
```

### Other distributions
1) Download the latest .tar.xz file(e.g. wine-aom-voobly-8.5-1.tar.xz) in [Releases](https://github.com/stkrknds/wine-aom-voobly/releases/latest).

2) Extract to a location:

```
tar -xf wine-aom-voobly-8.5-1.tar.xz
```

3) Use the Wine as:

```
extract_location/wine-aom-voobly/bin/wine command
```

If you use Lutris or other managers for Wine, you can simply choose this Wine as the runner.

## Credits
To [kaidelorenzo](https://github.com/kaidelorenzo) for coming up with a good fix.

To [Tk-Glitch/Frogging-Family](https://github.com/Frogging-Family/wine-tkg-git) for the esync & fsync patches.

The PKGBUILD is based on the one made by the [archlinux team](https://github.com/archlinux/svntogit-community/blob/packages/wine/trunk/PKGBUILD).
